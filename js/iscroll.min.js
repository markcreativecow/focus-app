(function(){var e=Math,t=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":"opera"in window?"O":"",n="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,r="ontouchstart"in window,i=t+"Transform"in document.documentElement.style,s=/android/gi.test(navigator.appVersion),o=/iphone|ipad/gi.test(navigator.appVersion),u=/playbook/gi.test(navigator.appVersion),a=o||u,f=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1)}}(),l=function(){return window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),c="onorientationchange"in window?"orientationchange":"resize",h=r?"touchstart":"mousedown",p=r?"touchmove":"mousemove",d=r?"touchend":"mouseup",v=r?"touchcancel":"mouseup",m=t=="Moz"?"DOMMouseScroll":"mousewheel",g="translate"+(n?"3d(":"("),y=n?",0)":")",b=function(e,u){var f=this,l=document,p;f.wrapper=typeof e=="object"?e:l.getElementById(e);f.wrapper.style.overflow="hidden";f.scroller=f.wrapper.children[0];f.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,topOffset:0,checkDOMChanges:false,hScrollbar:true,vScrollbar:true,fixedScrollbar:s,hideScrollbar:o,fadeScrollbar:o&&n,scrollbarClass:"",zoom:false,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:false,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};if(f.zoom&&s){g="translate(";y=")"}for(p in u)f.options[p]=u[p];f.x=f.options.x;f.y=f.options.y;f.options.useTransform=i?f.options.useTransform:false;f.options.hScrollbar=f.options.hScroll&&f.options.hScrollbar;f.options.vScrollbar=f.options.vScroll&&f.options.vScrollbar;f.options.zoom=f.options.useTransform&&f.options.zoom;f.options.useTransition=a&&f.options.useTransition;f.scroller.style[t+"TransitionProperty"]=f.options.useTransform?"-"+t.toLowerCase()+"-transform":"top left";f.scroller.style[t+"TransitionDuration"]="0";f.scroller.style[t+"TransformOrigin"]="0 0";if(f.options.useTransition)f.scroller.style[t+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)";if(f.options.useTransform)f.scroller.style[t+"Transform"]=g+f.x+"px,"+f.y+"px"+y;else f.scroller.style.cssText+=";position:absolute;top:"+f.y+"px;left:"+f.x+"px";if(f.options.useTransition)f.options.fixedScrollbar=true;f.refresh();f._bind(c,window);f._bind(h);if(!r){f._bind("mouseout",f.wrapper);f._bind(m)}if(f.options.checkDOMChanges)f.checkDOMTime=setInterval(function(){f._checkDOMChanges()},500)};b.prototype={enabled:true,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(e){var t=this;switch(e.type){case h:if(!r&&e.button!==0)return;t._start(e);break;case p:t._move(e);break;case d:case v:t._end(e);break;case c:t._resize();break;case m:t._wheel(e);break;case"mouseout":t._mouseout(e);break;case"webkitTransitionEnd":t._transitionEnd(e);break}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)return;this.refresh()},_scrollbar:function(n){var r=this,s=document,o;if(!r[n+"Scrollbar"]){if(r[n+"ScrollbarWrapper"]){if(i)r[n+"ScrollbarIndicator"].style[t+"Transform"]="";r[n+"ScrollbarWrapper"].parentNode.removeChild(r[n+"ScrollbarWrapper"]);r[n+"ScrollbarWrapper"]=null;r[n+"ScrollbarIndicator"]=null}return}if(!r[n+"ScrollbarWrapper"]){o=s.createElement("div");if(r.options.scrollbarClass)o.className=r.options.scrollbarClass+n.toUpperCase();else o.style.cssText="position:absolute;z-index:100;"+(n=="h"?"height:7px;bottom:1px;left:2px;right:"+(r.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(r.hScrollbar?"7":"2")+"px;top:2px;right:1px");o.style.cssText+=";pointer-events:none;-"+t+"-transition-property:opacity;-"+t+"-transition-duration:"+(r.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(r.options.hideScrollbar?"0":"1");r.wrapper.appendChild(o);r[n+"ScrollbarWrapper"]=o;o=s.createElement("div");if(!r.options.scrollbarClass){o.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-"+t+"-background-clip:padding-box;-"+t+"-box-sizing:border-box;"+(n=="h"?"height:100%":"width:100%")+";-"+t+"-border-radius:3px;border-radius:3px"}o.style.cssText+=";pointer-events:none;-"+t+"-transition-property:-"+t+"-transform;-"+t+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-"+t+"-transition-duration:0;-"+t+"-transform:"+g+"0,0"+y;if(r.options.useTransition)o.style.cssText+=";-"+t+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)";r[n+"ScrollbarWrapper"].appendChild(o);r[n+"ScrollbarIndicator"]=o}if(n=="h"){r.hScrollbarSize=r.hScrollbarWrapper.clientWidth;r.hScrollbarIndicatorSize=e.max(e.round(r.hScrollbarSize*r.hScrollbarSize/r.scrollerW),8);r.hScrollbarIndicator.style.width=r.hScrollbarIndicatorSize+"px";r.hScrollbarMaxScroll=r.hScrollbarSize-r.hScrollbarIndicatorSize;r.hScrollbarProp=r.hScrollbarMaxScroll/r.maxScrollX}else{r.vScrollbarSize=r.vScrollbarWrapper.clientHeight;r.vScrollbarIndicatorSize=e.max(e.round(r.vScrollbarSize*r.vScrollbarSize/r.scrollerH),8);r.vScrollbarIndicator.style.height=r.vScrollbarIndicatorSize+"px";r.vScrollbarMaxScroll=r.vScrollbarSize-r.vScrollbarIndicatorSize;r.vScrollbarProp=r.vScrollbarMaxScroll/r.maxScrollY}r._scrollbarPos(n,true)},_resize:function(){var e=this;setTimeout(function(){e.refresh()},s?200:0)},_pos:function(n,r){n=this.hScroll?n:0;r=this.vScroll?r:0;if(this.options.useTransform){this.scroller.style[t+"Transform"]=g+n+"px,"+r+"px"+y+" scale("+this.scale+")"}else{n=e.round(n);r=e.round(r);this.scroller.style.left=n+"px";this.scroller.style.top=r+"px"}this.x=n;this.y=r;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(n,r){var i=this,s=n=="h"?i.x:i.y,o;if(!i[n+"Scrollbar"])return;s=i[n+"ScrollbarProp"]*s;if(s<0){if(!i.options.fixedScrollbar){o=i[n+"ScrollbarIndicatorSize"]+e.round(s*3);if(o<8)o=8;i[n+"ScrollbarIndicator"].style[n=="h"?"width":"height"]=o+"px"}s=0}else if(s>i[n+"ScrollbarMaxScroll"]){if(!i.options.fixedScrollbar){o=i[n+"ScrollbarIndicatorSize"]-e.round((s-i[n+"ScrollbarMaxScroll"])*3);if(o<8)o=8;i[n+"ScrollbarIndicator"].style[n=="h"?"width":"height"]=o+"px";s=i[n+"ScrollbarMaxScroll"]+(i[n+"ScrollbarIndicatorSize"]-o)}else{s=i[n+"ScrollbarMaxScroll"]}}i[n+"ScrollbarWrapper"].style[t+"TransitionDelay"]="0";i[n+"ScrollbarWrapper"].style.opacity=r&&i.options.hideScrollbar?"0":"1";i[n+"ScrollbarIndicator"].style[t+"Transform"]=g+(n=="h"?s+"px,0":"0,"+s+"px")+y},_start:function(n){var i=this,s=r?n.touches[0]:n,o,u,a,f,c;if(!i.enabled)return;if(i.options.onBeforeScrollStart)i.options.onBeforeScrollStart.call(i,n);if(i.options.useTransition||i.options.zoom)i._transitionTime(0);i.moved=false;i.animating=false;i.zoomed=false;i.distX=0;i.distY=0;i.absDistX=0;i.absDistY=0;i.dirX=0;i.dirY=0;if(i.options.zoom&&r&&n.touches.length>1){f=e.abs(n.touches[0].pageX-n.touches[1].pageX);c=e.abs(n.touches[0].pageY-n.touches[1].pageY);i.touchesDistStart=e.sqrt(f*f+c*c);i.originX=e.abs(n.touches[0].pageX+n.touches[1].pageX-i.wrapperOffsetLeft*2)/2-i.x;i.originY=e.abs(n.touches[0].pageY+n.touches[1].pageY-i.wrapperOffsetTop*2)/2-i.y;if(i.options.onZoomStart)i.options.onZoomStart.call(i,n)}if(i.options.momentum){if(i.options.useTransform){o=getComputedStyle(i.scroller,null)[t+"Transform"].replace(/[^0-9-.,]/g,"").split(",");u=o[4]*1;a=o[5]*1}else{u=getComputedStyle(i.scroller,null).left.replace(/[^0-9-]/g,"")*1;a=getComputedStyle(i.scroller,null).top.replace(/[^0-9-]/g,"")*1}if(u!=i.x||a!=i.y){if(i.options.useTransition)i._unbind("webkitTransitionEnd");else l(i.aniTime);i.steps=[];i._pos(u,a)}}i.absStartX=i.x;i.absStartY=i.y;i.startX=i.x;i.startY=i.y;i.pointX=s.pageX;i.pointY=s.pageY;i.startTime=n.timeStamp||Date.now();if(i.options.onScrollStart)i.options.onScrollStart.call(i,n);i._bind(p);i._bind(d);i._bind(v)},_move:function(n){var i=this,s=r?n.touches[0]:n,o=s.pageX-i.pointX,u=s.pageY-i.pointY,a=i.x+o,f=i.y+u,l,c,h,p=n.timeStamp||Date.now();if(i.options.onBeforeScrollMove)i.options.onBeforeScrollMove.call(i,n);if(i.options.zoom&&r&&n.touches.length>1){l=e.abs(n.touches[0].pageX-n.touches[1].pageX);c=e.abs(n.touches[0].pageY-n.touches[1].pageY);i.touchesDist=e.sqrt(l*l+c*c);i.zoomed=true;h=1/i.touchesDistStart*i.touchesDist*this.scale;if(h<i.options.zoomMin)h=.5*i.options.zoomMin*Math.pow(2,h/i.options.zoomMin);else if(h>i.options.zoomMax)h=2*i.options.zoomMax*Math.pow(.5,i.options.zoomMax/h);i.lastScale=h/this.scale;a=this.originX-this.originX*i.lastScale+this.x,f=this.originY-this.originY*i.lastScale+this.y;this.scroller.style[t+"Transform"]=g+a+"px,"+f+"px"+y+" scale("+h+")";if(i.options.onZoom)i.options.onZoom.call(i,n);return}i.pointX=s.pageX;i.pointY=s.pageY;if(a>0||a<i.maxScrollX){a=i.options.bounce?i.x+o/2:a>=0||i.maxScrollX>=0?0:i.maxScrollX}if(f>i.minScrollY||f<i.maxScrollY){f=i.options.bounce?i.y+u/2:f>=i.minScrollY||i.maxScrollY>=0?i.minScrollY:i.maxScrollY}if(i.absDistX<6&&i.absDistY<6){i.distX+=o;i.distY+=u;i.absDistX=e.abs(i.distX);i.absDistY=e.abs(i.distY);return}if(i.options.lockDirection){if(i.absDistX>i.absDistY+5){f=i.y;u=0}else if(i.absDistY>i.absDistX+5){a=i.x;o=0}}i.moved=true;i._pos(a,f);i.dirX=o>0?-1:o<0?1:0;i.dirY=u>0?-1:u<0?1:0;if(p-i.startTime>300){i.startTime=p;i.startX=i.x;i.startY=i.y}if(i.options.onScrollMove)i.options.onScrollMove.call(i,n)},_end:function(n){if(r&&n.touches.length!=0)return;var i=this,s=r?n.changedTouches[0]:n,o,u,a={dist:0,time:0},f={dist:0,time:0},l=(n.timeStamp||Date.now())-i.startTime,c=i.x,h=i.y,m,b,w,E,S;i._unbind(p);i._unbind(d);i._unbind(v);if(i.options.onBeforeScrollEnd)i.options.onBeforeScrollEnd.call(i,n);if(i.zoomed){S=i.scale*i.lastScale;S=Math.max(i.options.zoomMin,S);S=Math.min(i.options.zoomMax,S);i.lastScale=S/i.scale;i.scale=S;i.x=i.originX-i.originX*i.lastScale+i.x;i.y=i.originY-i.originY*i.lastScale+i.y;i.scroller.style[t+"TransitionDuration"]="200ms";i.scroller.style[t+"Transform"]=g+i.x+"px,"+i.y+"px"+y+" scale("+i.scale+")";i.zoomed=false;i.refresh();if(i.options.onZoomEnd)i.options.onZoomEnd.call(i,n);return}if(!i.moved){if(r){if(i.doubleTapTimer&&i.options.zoom){clearTimeout(i.doubleTapTimer);i.doubleTapTimer=null;if(i.options.onZoomStart)i.options.onZoomStart.call(i,n);i.zoom(i.pointX,i.pointY,i.scale==1?i.options.doubleTapZoom:1);if(i.options.onZoomEnd){setTimeout(function(){i.options.onZoomEnd.call(i,n)},200)}}else{i.doubleTapTimer=setTimeout(function(){i.doubleTapTimer=null;o=s.target;while(o.nodeType!=1)o=o.parentNode;if(o.tagName!="SELECT"&&o.tagName!="INPUT"&&o.tagName!="TEXTAREA"){u=document.createEvent("MouseEvents");u.initMouseEvent("click",true,true,n.view,1,s.screenX,s.screenY,s.clientX,s.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,0,null);u._fake=true;o.dispatchEvent(u)}},i.options.zoom?250:0)}}i._resetPos(200);if(i.options.onTouchEnd)i.options.onTouchEnd.call(i,n);return}if(l<300&&i.options.momentum){a=c?i._momentum(c-i.startX,l,-i.x,i.scrollerW-i.wrapperW+i.x,i.options.bounce?i.wrapperW:0):a;f=h?i._momentum(h-i.startY,l,-i.y,i.maxScrollY<0?i.scrollerH-i.wrapperH+i.y-i.minScrollY:0,i.options.bounce?i.wrapperH:0):f;c=i.x+a.dist;h=i.y+f.dist;if(i.x>0&&c>0||i.x<i.maxScrollX&&c<i.maxScrollX)a={dist:0,time:0};if(i.y>i.minScrollY&&h>i.minScrollY||i.y<i.maxScrollY&&h<i.maxScrollY)f={dist:0,time:0}}if(a.dist||f.dist){w=e.max(e.max(a.time,f.time),10);if(i.options.snap){m=c-i.absStartX;b=h-i.absStartY;if(e.abs(m)<i.options.snapThreshold&&e.abs(b)<i.options.snapThreshold){i.scrollTo(i.absStartX,i.absStartY,200)}else{E=i._snap(c,h);c=E.x;h=E.y;w=e.max(E.time,w)}}i.scrollTo(e.round(c),e.round(h),w);if(i.options.onTouchEnd)i.options.onTouchEnd.call(i,n);return}if(i.options.snap){m=c-i.absStartX;b=h-i.absStartY;if(e.abs(m)<i.options.snapThreshold&&e.abs(b)<i.options.snapThreshold)i.scrollTo(i.absStartX,i.absStartY,200);else{E=i._snap(i.x,i.y);if(E.x!=i.x||E.y!=i.y)i.scrollTo(E.x,E.y,E.time)}if(i.options.onTouchEnd)i.options.onTouchEnd.call(i,n);return}i._resetPos(200);if(i.options.onTouchEnd)i.options.onTouchEnd.call(i,n)},_resetPos:function(e){var n=this,r=n.x>=0?0:n.x<n.maxScrollX?n.maxScrollX:n.x,i=n.y>=n.minScrollY||n.maxScrollY>0?n.minScrollY:n.y<n.maxScrollY?n.maxScrollY:n.y;if(r==n.x&&i==n.y){if(n.moved){n.moved=false;if(n.options.onScrollEnd)n.options.onScrollEnd.call(n)}if(n.hScrollbar&&n.options.hideScrollbar){if(t=="webkit")n.hScrollbarWrapper.style[t+"TransitionDelay"]="300ms";n.hScrollbarWrapper.style.opacity="0"}if(n.vScrollbar&&n.options.hideScrollbar){if(t=="webkit")n.vScrollbarWrapper.style[t+"TransitionDelay"]="300ms";n.vScrollbarWrapper.style.opacity="0"}return}n.scrollTo(r,i,e||0)},_wheel:function(e){var t=this,n,r,i,s,o;if("wheelDeltaX"in e){n=e.wheelDeltaX/12;r=e.wheelDeltaY/12}else if("detail"in e){n=r=-e.detail*3}else{n=r=-e.wheelDelta}if(t.options.wheelAction=="zoom"){o=t.scale*Math.pow(2,1/3*(r?r/Math.abs(r):0));if(o<t.options.zoomMin)o=t.options.zoomMin;if(o>t.options.zoomMax)o=t.options.zoomMax;if(o!=t.scale){if(!t.wheelZoomCount&&t.options.onZoomStart)t.options.onZoomStart.call(t,e);t.wheelZoomCount++;t.zoom(e.pageX,e.pageY,o,400);setTimeout(function(){t.wheelZoomCount--;if(!t.wheelZoomCount&&t.options.onZoomEnd)t.options.onZoomEnd.call(t,e)},400)}return}i=t.x+n;s=t.y+r;if(i>0)i=0;else if(i<t.maxScrollX)i=t.maxScrollX;if(s>t.minScrollY)s=t.minScrollY;else if(s<t.maxScrollY)s=t.maxScrollY;t.scrollTo(i,s,0)},_mouseout:function(e){var t=e.relatedTarget;if(!t){this._end(e);return}while(t=t.parentNode)if(t==this.wrapper)return;this._end(e)},_transitionEnd:function(e){var t=this;if(e.target!=t.scroller)return;t._unbind("webkitTransitionEnd");t._startAni()},_startAni:function(){var t=this,n=t.x,r=t.y,i=Date.now(),s,o,u;if(t.animating)return;if(!t.steps.length){t._resetPos(400);return}s=t.steps.shift();if(s.x==n&&s.y==r)s.time=0;t.animating=true;t.moved=true;if(t.options.useTransition){t._transitionTime(s.time);t._pos(s.x,s.y);t.animating=false;if(s.time)t._bind("webkitTransitionEnd");else t._resetPos(0);return}u=function(){var a=Date.now(),l,c;if(a>=i+s.time){t._pos(s.x,s.y);t.animating=false;if(t.options.onAnimationEnd)t.options.onAnimationEnd.call(t);t._startAni();return}a=(a-i)/s.time-1;o=e.sqrt(1-a*a);l=(s.x-n)*o+n;c=(s.y-r)*o+r;t._pos(l,c);if(t.animating)t.aniTime=f(u)};u()},_transitionTime:function(e){e+="ms";this.scroller.style[t+"TransitionDuration"]=e;if(this.hScrollbar)this.hScrollbarIndicator.style[t+"TransitionDuration"]=e;if(this.vScrollbar)this.vScrollbarIndicator.style[t+"TransitionDuration"]=e},_momentum:function(t,n,r,i,s){var o=6e-4,u=e.abs(t)/n,a=u*u/(2*o),f=0,l=0;if(t>0&&a>r){l=s/(6/(a/u*o));r=r+l;u=u*r/a;a=r}else if(t<0&&a>i){l=s/(6/(a/u*o));i=i+l;u=u*i/a;a=i}a=a*(t<0?-1:1);f=u/o;return{dist:a,time:e.round(f)}},_offset:function(e){var t=-e.offsetLeft,n=-e.offsetTop;while(e=e.offsetParent){t-=e.offsetLeft;n-=e.offsetTop}if(e!=this.wrapper){t*=this.scale;n*=this.scale}return{left:t,top:n}},_snap:function(t,n){var r=this,i,s,o,u,a,f;o=r.pagesX.length-1;for(i=0,s=r.pagesX.length;i<s;i++){if(t>=r.pagesX[i]){o=i;break}}if(o==r.currPageX&&o>0&&r.dirX<0)o--;t=r.pagesX[o];a=e.abs(t-r.pagesX[r.currPageX]);a=a?e.abs(r.x-t)/a*500:0;r.currPageX=o;o=r.pagesY.length-1;for(i=0;i<o;i++){if(n>=r.pagesY[i]){o=i;break}}if(o==r.currPageY&&o>0&&r.dirY<0)o--;n=r.pagesY[o];f=e.abs(n-r.pagesY[r.currPageY]);f=f?e.abs(r.y-n)/f*500:0;r.currPageY=o;u=e.round(e.max(a,f))||200;return{x:t,y:n,time:u}},_bind:function(e,t,n){(t||this.scroller).addEventListener(e,this,!!n)},_unbind:function(e,t,n){(t||this.scroller).removeEventListener(e,this,!!n)},destroy:function(){var e=this;e.scroller.style[t+"Transform"]="";e.hScrollbar=false;e.vScrollbar=false;e._scrollbar("h");e._scrollbar("v");e._unbind(c,window);e._unbind(h);e._unbind(p);e._unbind(d);e._unbind(v);if(e.options.hasTouch){e._unbind("mouseout",e.wrapper);e._unbind(m)}if(e.options.useTransition)e._unbind("webkitTransitionEnd");if(e.options.checkDOMChanges)clearInterval(e.checkDOMTime);if(e.options.onDestroy)e.options.onDestroy.call(e)},refresh:function(){var n=this,r,i,s,o,u=0,a=0;if(n.scale<n.options.zoomMin)n.scale=n.options.zoomMin;n.wrapperW=n.wrapper.clientWidth||1;n.wrapperH=n.wrapper.clientHeight||1;n.minScrollY=-n.options.topOffset||0;n.scrollerW=e.round(n.scroller.offsetWidth*n.scale);n.scrollerH=e.round((n.scroller.offsetHeight+n.minScrollY)*n.scale);n.maxScrollX=n.wrapperW-n.scrollerW;n.maxScrollY=n.wrapperH-n.scrollerH+n.minScrollY;n.dirX=0;n.dirY=0;if(n.options.onRefresh)n.options.onRefresh.call(n);n.hScroll=n.options.hScroll&&n.maxScrollX<0;n.vScroll=n.options.vScroll&&(!n.options.bounceLock&&!n.hScroll||n.scrollerH>n.wrapperH);n.hScrollbar=n.hScroll&&n.options.hScrollbar;n.vScrollbar=n.vScroll&&n.options.vScrollbar&&n.scrollerH>n.wrapperH;r=n._offset(n.wrapper);n.wrapperOffsetLeft=-r.left;n.wrapperOffsetTop=-r.top;if(typeof n.options.snap=="string"){n.pagesX=[];n.pagesY=[];o=n.scroller.querySelectorAll(n.options.snap);for(i=0,s=o.length;i<s;i++){u=n._offset(o[i]);u.left+=n.wrapperOffsetLeft;u.top+=n.wrapperOffsetTop;n.pagesX[i]=u.left<n.maxScrollX?n.maxScrollX:u.left*n.scale;n.pagesY[i]=u.top<n.maxScrollY?n.maxScrollY:u.top*n.scale}}else if(n.options.snap){n.pagesX=[];while(u>=n.maxScrollX){n.pagesX[a]=u;u=u-n.wrapperW;a++}if(n.maxScrollX%n.wrapperW)n.pagesX[n.pagesX.length]=n.maxScrollX-n.pagesX[n.pagesX.length-1]+n.pagesX[n.pagesX.length-1];u=0;a=0;n.pagesY=[];while(u>=n.maxScrollY){n.pagesY[a]=u;u=u-n.wrapperH;a++}if(n.maxScrollY%n.wrapperH)n.pagesY[n.pagesY.length]=n.maxScrollY-n.pagesY[n.pagesY.length-1]+n.pagesY[n.pagesY.length-1]}n._scrollbar("h");n._scrollbar("v");if(!n.zoomed){n.scroller.style[t+"TransitionDuration"]="0";n._resetPos(200)}},scrollTo:function(e,t,n,r){var i=this,s=e,o,u;i.stop();if(!s.length)s=[{x:e,y:t,time:n,relative:r}];for(o=0,u=s.length;o<u;o++){if(s[o].relative){s[o].x=i.x-s[o].x;s[o].y=i.y-s[o].y}i.steps.push({x:s[o].x,y:s[o].y,time:s[o].time||0})}i._startAni()},scrollToElement:function(t,n){var r=this,i;t=t.nodeType?t:r.scroller.querySelector(t);if(!t)return;i=r._offset(t);i.left+=r.wrapperOffsetLeft;i.top+=r.wrapperOffsetTop;i.left=i.left>0?0:i.left<r.maxScrollX?r.maxScrollX:i.left;i.top=i.top>r.minScrollY?r.minScrollY:i.top<r.maxScrollY?r.maxScrollY:i.top;n=n===undefined?e.max(e.abs(i.left)*2,e.abs(i.top)*2):n;r.scrollTo(i.left,i.top,n)},scrollToPage:function(e,t,n){var r=this,i,s;if(r.options.onScrollStart)r.options.onScrollStart.call(r);if(r.options.snap){e=e=="next"?r.currPageX+1:e=="prev"?r.currPageX-1:e;t=t=="next"?r.currPageY+1:t=="prev"?r.currPageY-1:t;e=e<0?0:e>r.pagesX.length-1?r.pagesX.length-1:e;t=t<0?0:t>r.pagesY.length-1?r.pagesY.length-1:t;r.currPageX=e;r.currPageY=t;i=r.pagesX[e];s=r.pagesY[t]}else{i=-r.wrapperW*e;s=-r.wrapperH*t;if(i<r.maxScrollX)i=r.maxScrollX;if(s<r.maxScrollY)s=r.maxScrollY}r.scrollTo(i,s,n||400)},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(p);this._unbind(d);this._unbind(v)},enable:function(){this.enabled=true},stop:function(){if(this.options.useTransition)this._unbind("webkitTransitionEnd");else l(this.aniTime);this.steps=[];this.moved=false;this.animating=false},zoom:function(e,n,r,i){var s=this,o=r/s.scale;if(!s.options.useTransform)return;s.zoomed=true;i=i===undefined?200:i;e=e-s.wrapperOffsetLeft-s.x;n=n-s.wrapperOffsetTop-s.y;s.x=e-e*o+s.x;s.y=n-n*o+s.y;s.scale=r;s.refresh();s.x=s.x>0?0:s.x<s.maxScrollX?s.maxScrollX:s.x;s.y=s.y>s.minScrollY?s.minScrollY:s.y<s.maxScrollY?s.maxScrollY:s.y;s.scroller.style[t+"TransitionDuration"]=i+"ms";s.scroller.style[t+"Transform"]=g+s.x+"px,"+s.y+"px"+y+" scale("+r+")";s.zoomed=false},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};if(typeof exports!=="undefined")exports.iScroll=b;else window.iScroll=b})()